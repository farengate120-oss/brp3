# BenjForum - ะคะพััะผ ะฝะฐ Django Misago

## ๐ ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ

ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน ัะพััะผ, ะฟะพัััะพะตะฝะฝัะน ะฝะฐ ะฑะฐะทะต Django Misago ั ะฝะฐัััะพะตะฝะฝะพะน ะธะฝััะฐััััะบัััะพะน ะดะปั production ัะฐะทะฒะตัััะฒะฐะฝะธั.

**๐ ะกะฐะนั:** https://benj.run.place/  
**๐ค ะะดะผะธะฝ:** admin / misago2025  
**๐ง Email:** admin@benj.run.place  

## ๐ ะขะตัะฝะพะปะพะณะธะธ

- **Backend:** Django 4.2+ ั Misago 3.x
- **Frontend:** React + Webpack + Babel
- **ะะฐะทะฐ ะดะฐะฝะฝัั:** PostgreSQL 15+
- **ะัั:** Redis 7+
- **ะะตะฑ-ัะตัะฒะตั:** Nginx
- **ะะพะฝัะตะนะฝะตัะธะทะฐัะธั:** Docker + Docker Compose
- **ะะฐะดะฐัะธ:** Celery + Celery Beat

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ     Nginx       โโโโโโ     Django      โโโโโโ   PostgreSQL    โ
โ  (Reverse Proxy โ    โ   (Web App)     โ    โ   (Database)    โ
โ   + SSL/TLS)    โ    โ                 โ    โ                 โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                              โ
                              โผ
                       โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                       โ     Redis       โ    โ     Celery      โ
                       โ    (Cache)      โ    โ   (Background   โ
                       โ                 โ    โ     Tasks)      โ
                       โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ฆ ะะพะผะฟะพะฝะตะฝัั

### ๐ Django ะฟัะธะปะพะถะตะฝะธั
- **misago** - ะพัะฝะพะฒะฝะพะต ะฟัะธะปะพะถะตะฝะธะต ัะพััะผะฐ
- **misago-admin** - ะฐะดะผะธะฝะธัััะฐัะธะฒะฝะฐั ะฟะฐะฝะตะปั
- **threads** - ัะฟัะฐะฒะปะตะฝะธะต ัะตะผะฐะผะธ ะธ ัะพะพะฑัะตะฝะธัะผะธ
- **users** - ัะธััะตะผะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- **notifications** - ัะธััะตะผะฐ ัะฒะตะดะพะผะปะตะฝะธะน

### ๐ฑ Frontend
- React ะบะพะผะฟะพะฝะตะฝัั ะดะปั UI
- Webpack ะดะปั ัะฑะพัะบะธ
- Babel ะดะปั ััะฐะฝัะฟะธะปััะธะธ ES6+
- Highlight.js ะดะปั ะฟะพะดัะฒะตัะบะธ ัะธะฝัะฐะบัะธัะฐ

### ๐ณ Docker ะบะพะฝัะตะนะฝะตัั
- `web` - Django ะฟัะธะปะพะถะตะฝะธะต
- `postgres` - ะฑะฐะทะฐ ะดะฐะฝะฝัั
- `redis` - ะบัั ะธ ัะตััะธะธ
- `nginx` - ะฒะตะฑ-ัะตัะฒะตั
- `celery-worker` - ะฒะพัะบะตัั ะดะปั ัะพะฝะพะฒัั ะทะฐะดะฐั
- `celery-beat` - ะฟะปะฐะฝะธัะพะฒัะธะบ ะทะฐะดะฐั

## ๐๏ธ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั
- Docker 24.0+
- Docker Compose 2.0+
- Ubuntu 22.04 LTS (ัะตะบะพะผะตะฝะดัะตััั)

### ะัััััะน ะทะฐะฟััะบ

1. **ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั**
   ```bash
   git clone https://github.com/farengate120-oss/brp3.git
   cd brp3
   ```

2. **ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั**
   ```bash
   cp deployment_package/.env.example .env
   nano .env  # ะััะตะดะฐะบัะธััะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
   ```

3. **ะะฐะฟััะบ ัะตัะฒะธัะพะฒ**
   ```bash
   cd deployment_package
   docker-compose up -d
   ```

4. **ะกะพะทะดะฐะฝะธะต ััะฟะตัะฟะพะปัะทะพะฒะฐัะตะปั**
   ```bash
   docker exec -it benjforum_web python manage.py createsuperuser
   ```

5. **ะัะธะผะตะฝะตะฝะธะต ะผะธะณัะฐัะธะน**
   ```bash
   docker exec -it benjforum_web python manage.py migrate
   ```

### Production ัะฐะทะฒะตัััะฒะฐะฝะธะต

ะัะฟะพะปัะทัะนัะต ะณะพัะพะฒัะต ัะบัะธะฟัั ะฒ ะฟะฐะฟะบะต `deployment_package/`:

```bash
cd deployment_package
./quick_deploy_fixed.sh
```

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
brp3/
โโโ brp1/                     # ะะตัะฒะฐั ะฒะตััะธั ะฟัะพะตะบัะฐ
โโโ brp2/                     # ะัะพัะฐั ะฒะตััะธั (ะธัะฟัะฐะฒะปะตะฝะฝะฐั)
โโโ misago_test/              # ะขะตััะพะฒะฐั ะฒะตััะธั
โโโ deployment_package/       # ะะฐะบะตั ะดะปั ะดะตะฟะปะพั
โ   โโโ docker-compose.yaml
โ   โโโ nginx/
โ   โโโ quick_deploy_fixed.sh
โโโ scripts/                  # ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ัะบัะธะฟัั
โโโ docs/                     # ะะพะบัะผะตะฝัะฐัะธั
โโโ README.md                 # ะญัะพั ัะฐะนะป
```

## ๐ง ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะัะฝะพะฒะฝัะต ะฝะฐัััะพะนะบะธ ะฒ `.env`:

```bash
# Database
POSTGRES_DB=benjforum_db
POSTGRES_USER=benjforum_user
POSTGRES_PASSWORD=your_secure_password

# Django
SECRET_KEY=your_django_secret_key
DEBUG=False
ALLOWED_HOSTS=benj.run.place,84.21.189.163

# Redis
REDIS_PASSWORD=your_redis_password

# SSL
LETSENCRYPT_EMAIL=admin@benj.run.place
DOMAIN=benj.run.place
```

### Nginx ะบะพะฝัะธะณััะฐัะธั

Nginx ะฝะฐัััะพะตะฝ ะดะปั:
- SSL/TLS termination ั Let's Encrypt
- ะัะพะบัะธัะพะฒะฐะฝะธะต ะฝะฐ Django
- ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั
- Gzip ัะถะฐัะธะต
- ะะตะทะพะฟะฐัะฝะพััั ะทะฐะณะพะปะพะฒะบะธ

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- โ HTTPS ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะพะฑะฝะพะฒะปะตะฝะธะตะผ ัะตััะธัะธะบะฐัะพะฒ
- โ CSRF ะทะฐัะธัะฐ
- โ XSS ะทะฐัะธัะฐ
- โ SQL injection ะทะฐัะธัะฐ
- โ Secure cookies
- โ HSTS ะทะฐะณะพะปะพะฒะบะธ
- โ Content Security Policy

## ๐ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะะฑัะธะต ะฟัะพะฑะปะตะผั

1. **CSRF ะพัะธะฑะบะธ**
   ```bash
   # ะัะธััะบะฐ ัะตััะธะน
   ./clear_sessions_script.sh
   ```

2. **HTTPS ะฝะตะดะพัััะฟะตะฝ**
   ```bash
   # ะัะพะฒะตัะบะฐ SSL ัะตััะธัะธะบะฐัะพะฒ
   ./fix_https_emergency.sh
   ```

3. **ะัะพะฑะปะตะผั ั ะฑะฐะทะพะน ะดะฐะฝะฝัั**
   ```bash
   # ะะตัะตะทะฐะฟััะบ PostgreSQL
   docker restart benjforum_postgres
   ```

### ะะพะณะธ

ะัะพัะผะพัั ะปะพะณะพะฒ ะบะพะฝัะตะนะฝะตัะพะฒ:
```bash
docker logs benjforum_web
docker logs benjforum_nginx
docker logs benjforum_postgres
```

## ๐ ะะพะฝะธัะพัะธะฝะณ

### Health Check

ะกะบัะธะฟั ะผะพะฝะธัะพัะธะฝะณะฐ ะดะพัััะฟะตะฝ:
```bash
./health_monitor.sh
```

### ะกัะฐััั ัะตัะฒะธัะพะฒ

ะัะพะฒะตัะบะฐ ัะพััะพัะฝะธั ะฒัะตั ะบะพะฝัะตะนะฝะตัะพะฒ:
```bash
docker-compose ps
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะะฒัะพะผะฐัะธัะตัะบะธะต ัะตััั

```bash
# ะะฐะฟััะบ ัะตััะพะฒ
docker exec -it benjforum_web python -m pytest

# ะัะพะฒะตัะบะฐ CSRF
./csrf_test.sh
```

## ๐ ะะตะฟะปะพะน

### Production ะณะพัะพะฒะฝะพััั

ะะตะฟะพะทะธัะพัะธะน ัะพะดะตัะถะธั:
- โ ะะพะปะฝะพัััั ะฝะฐัััะพะตะฝะฝัั Docker ะธะฝััะฐััััะบัััั
- โ Production ะบะพะฝัะธะณััะฐัะธะธ
- โ SSL ัะตััะธัะธะบะฐัั
- โ ะะฒัะพะผะฐัะธัะตัะบะธะต ัะบัะธะฟัั ะดะตะฟะปะพั
- โ ะะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธัะพะฒะฐะฝะธะต
- โ Backup ัััะฐัะตะณะธะธ

### ะะฒัะพะผะฐัะธัะตัะบะธะน ะดะตะฟะปะพะน

```bash
cd deployment_package
./quick_deploy_fixed.sh
```

## ๐ฅ ะะพะผะฐะฝะดะฐ

**ะะฒัะพั:** MiniMax Agent  
**ะะฐัะฐ ัะพะทะดะฐะฝะธั:** 1 ะดะตะบะฐะฑัั 2025  
**ะะตััะธั:** 1.0 (ะคะธะฝะฐะปัะฝะฐั)

## ๐ ะะธัะตะฝะทะธั

ะญัะพั ะฟัะพะตะบั ัะพะทะดะฐะฝ ะดะปั ะพะฑัะฐะทะพะฒะฐัะตะปัะฝัั ะธ ะดะตะผะพะฝัััะฐัะธะพะฝะฝัั ัะตะปะตะน.

## ๐ค ะะพะดะดะตัะถะบะฐ

ะะปั ะฟะพะปััะตะฝะธั ะฟะพะดะดะตัะถะบะธ:
1. ะัะพะฒะตัััะต ัะฐะทะดะตะป "ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ"
2. ะะทััะธัะต ะปะพะณะธ ะบะพะฝัะตะนะฝะตัะพะฒ
3. ะัะฟะพะปัะทัะนัะต ัะบัะธะฟัั ะดะธะฐะณะฝะพััะธะบะธ

---

**โญ ะัะปะธ ะฟัะพะตะบั ะฟะพะปะตะทะตะฝ, ะฟะพััะฐะฒััะต ะทะฒะตะทะดั ะฝะฐ GitHub!**